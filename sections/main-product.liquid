<!-- Breadcrumbs -->
<div class="container pt-4">
  <nav aria-label="breadcrumb">
    <ol class="breadcrumb small">
      <li class="breadcrumb-item"><a href="{{ routes.root_url }}">Home</a></li>
      <li class="breadcrumb-item">
        <a href="{{ routes.all_products_collection_url }}">Collections</a>
      </li>
      <li class="breadcrumb-item">
        <a href="{{ collection.url }}">{{ collection.title }}</a>
      </li>
      <li class="breadcrumb-item active" aria-current="page">
        {{ product.title }}
      </li>
    </ol>
  </nav>
</div>

<!-- Product -->
<main class="pb-5">
  <div class="container">
    <div class="row g-4">
      <!-- Gallery -->
      <div class="col-lg-6">
        <div class="card card-soft p-3">
          <img
            id="mainImg"
            class="thumb w-100 rounded-4"
            src="https://placehold.co/900x600/c4f2e8/0b1220?text=Key+Lime+Pie"
            alt="Key Lime Pie cupcake"
          />
          <div class="row g-2 mt-2">
            <div class="col-3">
              <img
                class="thumb-sm w-100 active"
                data-src="https://placehold.co/900x600/c4f2e8/0b1220?text=Key+Lime+Pie"
                src="https://placehold.co/300x300/c4f2e8/0b1220?text=1"
                alt="thumb 1"
              />
            </div>
            <div class="col-3">
              <img
                class="thumb-sm w-100"
                data-src="https://placehold.co/900x600/ffe999/0b1220?text=Inside+Crumb"
                src="https://placehold.co/300x300/ffe999/0b1220?text=2"
                alt="thumb 2"
              />
            </div>
            <div class="col-3">
              <img
                class="thumb-sm w-100"
                data-src="https://placehold.co/900x600/b8f3ea/0b1220?text=Top+Swirl"
                src="https://placehold.co/300x300/b8f3ea/0b1220?text=3"
                alt="thumb 3"
              />
            </div>
            <div class="col-3">
              <img
                class="thumb-sm w-100"
                data-src="https://placehold.co/900x600/fef3c7/0b1220?text=Box+Shot"
                src="https://placehold.co/300x300/fef3c7/0b1220?text=4"
                alt="thumb 4"
              />
            </div>
          </div>
        </div>
      </div>

      <!-- Details -->
      <div class="col-lg-6">
        <div class="d-flex align-items-center gap-2 mb-2">
          <span -success pill">Fruity</span>
          <span class="badge text-bg-warning pill">Limited</span>
        </div>
        <h1 class="brand fw-black mb-1">{{ product.title}}</h1>
        <p class="lead mb-3">{{ product.description }}</p>

        <!-- BUNDLE / BUILD A BOX -->
        <div class="card card-soft p-3 mb-3" id="bundleCard">
          <div class="d-flex justify-content-between align-items-center mb-2">
            <h5 class="m-0">Select Cupcakes for Box</h5>
          </div>

          <div class="vstack gap-2" id="bundleList">
            <div class="d-flex align-items-center justify-content-between rounded-4 p-2">
              <div class="d-flex align-items-center gap-2">
                <img src="https://placehold.co/600x400/ded3ff/0b1220?text=Mocha+Latte+Buzz" alt="Mocha Latte Buzz" width="56" height="56" class="rounded" style="object-fit:cover">
                <div>
                  <div class="fw-semibold small">Mocha Latte Buzz</div>
                  <div class="small text-secondary">$3.95</div>
                </div>
              </div>
              <div class="input-group input-group-sm" style="width: 120px">
                <button class="btn btn-outline-secondary b-minus" data-idx="0" type="button" aria-label="Decrease Mocha Latte Buzz"><i class="bi bi-dash"></i></button>
                <input class="form-control text-center b-qty" data-idx="0" value="0" inputmode="numeric" aria-label="Quantity for Mocha Latte Buzz">
                <button class="btn btn-outline-secondary b-plus" data-idx="0" type="button" aria-label="Increase Mocha Latte Buzz"><i class="bi bi-plus"></i></button>
              </div>
            </div>

            <div class="d-flex align-items-center justify-content-between rounded-4 p-2">
              <div class="d-flex align-items-center gap-2">
                <img src="https://placehold.co/600x400/cffafe/0b1220?text=Matcha+Honey+Harmony" alt="Matcha Honey Harmony" width="56" height="56" class="rounded" style="object-fit:cover">
                <div>
                  <div class="fw-semibold small">Matcha Honey Harmony</div>
                  <div class="small text-secondary">$4.25</div>
                </div>
              </div>
              <div class="input-group input-group-sm" style="width: 120px">
                <button class="btn btn-outline-secondary b-minus" data-idx="1" type="button" aria-label="Decrease Matcha Honey Harmony"><i class="bi bi-dash"></i></button>
                <input class="form-control text-center b-qty" data-idx="1" value="0" inputmode="numeric" aria-label="Quantity for Matcha Honey Harmony">
                <button class="btn btn-outline-secondary b-plus" data-idx="1" type="button" aria-label="Increase Matcha Honey Harmony"><i class="bi bi-plus"></i></button>
              </div>
            </div>

            <div class="d-flex align-items-center justify-content-between rounded-4 p-2">
              <div class="d-flex align-items-center gap-2">
                <img src="https://placehold.co/600x400/ffd1dc/0b1220?text=Strawberry+Shortcake" alt="Strawberry Shortcake" width="56" height="56" class="rounded" style="object-fit:cover">
                <div>
                  <div class="fw-semibold small">Strawberry Shortcake</div>
                  <div class="small text-secondary">$3.95</div>
                </div>
              </div>
              <div class="input-group input-group-sm" style="width: 120px">
                <button class="btn btn-outline-secondary b-minus" data-idx="2" type="button" aria-label="Decrease Strawberry Shortcake"><i class="bi bi-dash"></i></button>
                <input class="form-control text-center b-qty" data-idx="2" value="0" inputmode="numeric" aria-label="Quantity for Strawberry Shortcake">
                <button class="btn btn-outline-secondary b-plus" data-idx="2" type="button" aria-label="Increase Strawberry Shortcake"><i class="bi bi-plus"></i></button>
              </div>
            </div>

            <div class="d-flex align-items-center justify-content-between rounded-4 p-2">
              <div class="d-flex align-items-center gap-2">
                <img src="https://placehold.co/600x400/ffe3b3/0b1220?text=Churro+Cinnamon+Swirl" alt="Churro Cinnamon Swirl" width="56" height="56" class="rounded" style="object-fit:cover">
                <div>
                  <div class="fw-semibold small">Churro Cinnamon Swirl</div>
                  <div class="small text-secondary">$3.85</div>
                </div>
              </div>
              <div class="input-group input-group-sm" style="width: 120px">
                <button class="btn btn-outline-secondary b-minus" data-idx="3" type="button" aria-label="Decrease Churro Cinnamon Swirl"><i class="bi bi-dash"></i></button>
                <input class="form-control text-center b-qty" data-idx="3" value="0" inputmode="numeric" aria-label="Quantity for Churro Cinnamon Swirl">
                <button class="btn btn-outline-secondary b-plus" data-idx="3" type="button" aria-label="Increase Churro Cinnamon Swirl"><i class="bi bi-plus"></i></button>
              </div>
            </div>
          </div>

          <div class="text-end mt-2">
            <small class="text-secondary"><span id="bundleCount">0</span>
              selected</small>
          </div>
        </div>

        <div class="card card-soft p-3 mb-3">
          <form action="/cart/add" method="post" id="product-form">
            <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}">

            <div class="row g-3 align-items-end">
              <div class="col-sm-6">
                <label class="form-label">Qty</label>
                <div class="input-group">
                  <button class="btn btn-outline-secondary" id="minus" type="button">
                    <i class="bi bi-dash"></i>
                  </button>
                  <input
                    id="qty"
                    class="form-control text-center"
                    name="quantity"
                    type="number"
                    value="1"
                    min="1"
                    inputmode="numeric"
                  />
                  <button class="btn btn-outline-secondary" id="plus" type="button">
                    <i class="bi bi-plus"></i>
                  </button>
                </div>
              </div>

              <div class="col-sm-6 text-sm-end">
                <div class="small text-secondary">Price</div>
                <div class="h4 m-0" id="price">{{ product.selected_or_first_available_variant.price | money }}</div>
              </div>
            </div>

            <div class="d-grid mt-3">
              <button class="btn btn-dark btn-lg" type="submit" id="addBtn">
                <i class="bi bi-bag-plus"></i> Add to cart
              </button>
            </div>
          </form>

          <div class="d-flex gap-3 mt-3 small">
            <div><i class="bi bi-emoji-smile"></i> Happiness guarantee</div>
          </div>
        </div>


        <div class="row g-3">
          <div class="col-sm-6">
            <div class="card card-soft p-3 h-100">
              <div
                class="d-flex align-items-center gap-2 mb-1"
              >
                <i
                  class="bi bi-shield-check text-success"
                ></i
                ><strong>Allergen-friendly</strong>
              </div>
              <p class="small text-secondary mb-0">
                Contains: dairy, eggs, wheat. <br />Made
                in a facility that also handles nuts.
              </p>
            </div>
          </div>
          <div class="col-sm-6">
            <div class="card card-soft p-3 h-100">
              <div
                class="d-flex align-items-center gap-2 mb-1"
              >
                <i class="bi bi-sun text-warning"></i
                ><strong>Fresh daily</strong>
              </div>
              <p class="small text-secondary mb-0">
                Baked each morning. Best enjoyed at room
                temp.
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Related products -->
    <section class="py-5">
      <div
        class="d-flex justify-content-between align-items-end mb-3"
      >
        <h3 class="brand fw-black m-0">You might also like</h3>
        <a class="link-dark" href="all-products.html"
        >See all <i class="bi bi-arrow-right-short"></i
        ></a>
      </div>
      <div class="row g-4">
        <div class="col-12 col-sm-6 col-lg-3">
          <div class="card card-soft h-100">
            <img
              class="thumb w-100"
              src="https://placehold.co/600x400/ded3ff/0b1220?text=Mocha+Latte+Buzz"
              alt="Mocha Latte Buzz"
            />
            <div class="card-body d-flex flex-column">
              <h6 class="mb-1">Mocha Latte Buzz</h6>
              <div
                class="d-flex justify-content-between align-items-center mt-auto"
              >
                <span class="badge text-bg-dark pill"
                >Chocolate</span
                >
                <strong>$3.95</strong>
              </div>
              <button
                class="btn btn-outline-dark w-100 mt-2"
                onclick="addToCart('Mocha Latte Buzz', 3.95)"
              >
                <i class="bi bi-bag-plus"></i> Add
              </button>
            </div>
          </div>
        </div>
        <div class="col-12 col-sm-6 col-lg-3">
          <div class="card card-soft h-100">
            <img
              class="thumb w-100"
              src="https://placehold.co/600x400/cffafe/0b1220?text=Matcha+Honey+Harmony"
              alt="Matcha Honey Harmony"
            />
            <div class="card-body d-flex flex-column">
              <h6 class="mb-1">Matcha Honey Harmony</h6>
              <div
                class="d-flex justify-content-between align-items-center mt-auto"
              >
                <span class="badge text-bg-warning pill"
                >Specialty</span
                >
                <strong>$4.25</strong>
              </div>
              <button
                class="btn btn-outline-dark w-100 mt-2"
                onclick="addToCart('Matcha Honey Harmony', 4.25)"
              >
                <i class="bi bi-bag-plus"></i> Add
              </button>
            </div>
          </div>
        </div>
        <div class="col-12 col-sm-6 col-lg-3">
          <div class="card card-soft h-100">
            <img
              class="thumb w-100"
              src="https://placehold.co/600x400/ffd1dc/0b1220?text=Strawberry+Shortcake"
              alt="Strawberry Shortcake"
            />
            <div class="card-body d-flex flex-column">
              <h6 class="mb-1">Strawberry Shortcake</h6>
              <div
                class="d-flex justify-content-between align-items-center mt-auto"
              >
                <span class="badge text-bg-success pill"
                >Fruity</span
                >
                <strong>$3.95</strong>
              </div>
              <button
                class="btn btn-outline-dark w-100 mt-2"
                onclick="addToCart('Strawberry Shortcake', 3.95)"
              >
                <i class="bi bi-bag-plus"></i> Add
              </button>
            </div>
          </div>
        </div>
        <div class="col-12 col-sm-6 col-lg-3">
          <div class="card card-soft h-100">
            <img
              class="thumb w-100"
              src="https://placehold.co/600x400/ffe3b3/0b1220?text=Churro+Cinnamon+Swirl"
              alt="Churro Cinnamon Swirl"
            />
            <div class="card-body d-flex flex-column">
              <h6 class="mb-1">Churro Cinnamon Swirl</h6>
              <div
                class="d-flex justify-content-between align-items-center mt-auto"
              >
                <span class="badge text-bg-dark pill"
                >Chocolate</span
                >
                <strong>$3.85</strong>
              </div>
              <button
                class="btn btn-outline-dark w-100 mt-2"
                onclick="addToCart('Churro Cinnamon Swirl', 3.85)"
              >
                <i class="bi bi-bag-plus"></i> Add
              </button>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>
</main>

<script>
  (function () {
    var q = document.getElementById('qty');
    document.getElementById('minus').addEventListener('click', function () {
      q.stepDown(); if (+q.value < 1) q.value = 1;
    });
    document.getElementById('plus').addEventListener('click', function () {
      q.stepUp();
    });
  })();
</script>
